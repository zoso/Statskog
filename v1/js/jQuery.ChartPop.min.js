var chartCount=0;var chartArr=[];var cloneState=false;(function(c){var b={div:this,width:300,height:300,graphID:"graphID",graphNr:1,"pop-container":c("#dialog-wrapper"),"mask-container":"","mask-color":"#333","mask-opacity":0.9,"pop-width":800,"pop-height":400,spinner:true};var a={init:function(d){var e='<div class="chart-wrapper" style="width: '+b.width+"px; height:"+b.height+'px;">';e+='<div id="'+b.graphID+'" class="loading">-loading-</div>';e+='<div class="pop-chart"><a href="#" data-id="'+b.graphNr+'" class="dialog-open icon-zoom-in"></a></div></div>';e+='<div class="spacer">&nbsp;</div>';return e},pop:function(d){var f=c(document).height();var j=c(window).width();b.hc.chart.renderTo="dialog";b["mask-container"].fadeIn(200);b["mask-container"].fadeTo("slow",b["mask-opacity"]);b["mask-container"].css({width:j,height:f});b["mask-container"].css("background-color",b["mask-color"]);var g=c(window).height();var e=c(window).width();b["pop-container"].css("top",g/2-b["pop-height"]/2);b["pop-container"].css("left",e/2-b["pop-width"]/2);b["pop-container"].css({width:b["pop-width"],height:b["pop-height"]});if(b.spinner==true){c("#dialog").html('<div style="width: 220px; height: 19px; margin: 0 auto; margin-top: 200px;"><img src="img/spinner_2.gif" /></div>')}var i={};b["pop-container"].fadeIn(500,function(){i=new Highcharts.Chart(b.hc);i.setSize(b["pop-width"],b["pop-height"])});b["mask-container"].click(h);c("a.dialog-close").on("click",h);c(document).keyup(function(k){if(k.keyCode==27){h(k)}});function h(k){k.preventDefault();b["pop-container"].fadeOut(100,function(){i=null;c("#dialog").html("")});b["mask-container"].hide()}},get_settings:function(){for(var d in b){console.log("> "+d+" > "+b[d])}}};c.fn.chartpop=function(d,e){b=c.extend({},b,e||{});if(a[d]){switch(d){case"init":return this.html(a[d]());break;case"pop":a[d]();break;case"get_settings":a[d]();break;default:break}}else{if(typeof d==="object"||!d){console.log("settings recived")}else{console.log("error - ingen metode funnet ("+d+")")}}}})(jQuery);